(()=>{var t={29:(t,e,i)=>{t=i.nmd(t);const s=i(571);t.export=s},571:(t,e,i)=>{(t=i.nmd(t)).export=class{constructor(){this.__data__=[]}top(){return this.__data__[this.__data__.length-1]}empty(){return 0===this.__data__.length}pop(){this.__data__.pop()}push(t){this.__data__.push(t)}}}},e={};function i(s){var o=e[s];if(void 0!==o)return o.exports;var n=e[s]={id:s,loaded:!1,exports:{}};return t[s](n,n.exports,i),n.loaded=!0,n.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t=i(29),e=i.n(t);const s=new class{constructor({directed:t,showDistance:e,showGrid:i,radius:s}={}){this.board=new class{constructor({width:t,height:e,radius:i,fontSize:s}){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.radius=i||20,this.fontSize=s||25,this.clientPosition={x:0,y:0},this.buttons=0,this.shift=!1,this.selector="",this.canvas.width=t||300,this.canvas.height=e||400,this.init()}init(){this.canvas.onmousemove=t=>{this.clientPosition={x:t.clientX-this.canvas.offsetLeft+window.scrollX,y:t.clientY-this.canvas.offsetTop+window.scrollY},this.buttons=t.buttons,this.shift=t.shiftKey},window.onresize=t=>{this.selector&&this.appendTo(this.selector)}}appendTo(t){this.selector=t;const e=document.querySelector(t);e.innerHTML="",e.append(this.canvas),this.canvas.width=e.offsetWidth,this.canvas.height=e.offsetHeight}drawCircle(t,e,i){this.context.lineWidth=5,this.context.beginPath(),this.context.arc(t,e,i,0,2*Math.PI),this.context.stroke(),this.context.fillStyle="#fff",this.context.fill(),this.context.fillStyle="#000",this.context.lineWidth=1}drawNode(t,e,i,s){s&&(this.context.strokeStyle="#dc3545"),this.drawCircle(t,e,this.radius),this.context.font=`${this.fontSize}px Arial`,this.context.textAlign="center",this.context.fillText(i,t,e+this.fontSize/2),this.context.strokeStyle="#000"}drawLine(t,e,i,s){this.context.lineWidth=2,this.context.beginPath(),this.context.moveTo(t,e),this.context.lineTo(i,s),this.context.stroke(),this.context.lineWidth=1}drawDirected(t,e,i,s){const o=Math.atan2(e-s,t-i),n={x:i+this.radius*Math.cos(o),y:s+this.radius*Math.sin(o)},a=n.x+this.radius*Math.cos(o)*Math.pow(3,.5)/2,h=n.y+this.radius*Math.sin(o)*Math.pow(3,.5)/2,d={x:a+this.radius/2*Math.cos(o-Math.PI/2),y:h+this.radius/2*Math.sin(o-Math.PI/2)},r={x:a+this.radius/2*Math.cos(o+Math.PI/2),y:h+this.radius/2*Math.sin(o+Math.PI/2)};this.context.lineWidth=5,this.context.beginPath(),this.context.moveTo(n.x,n.y),this.context.lineTo(d.x,d.y),this.context.lineTo(r.x,r.y),this.context.lineTo(n.x,n.y),this.context.fillStyle="#000",this.context.stroke(),this.context.fill(),this.context.lineWidth=1}drawDistance(t,e,i,s){const o={x:(t+i)/2,y:(e+s)/2},n=Math.sqrt(Math.pow(t-i,2)+Math.pow(e-s,2));this.context.fillStyle="#000",this.context.beginPath(),this.context.fillText(parseInt(n/100),o.x,o.y),this.context.textAlign="center",this.context.fillStyle="#fff"}drawHorizontal(t){this.context.strokeStyle="#fff",this.context.beginPath(),this.context.moveTo(0,t),this.context.lineTo(this.canvas.width,t),this.context.stroke(),this.context.strokeStyle="#000"}drawVertical(t){this.context.strokeStyle="#fff",this.context.beginPath(),this.context.moveTo(t,0),this.context.lineTo(t,this.canvas.height),this.context.stroke(),this.context.strokeStyle="#000"}drawGrid(){for(let t=0;t<=this.canvas.height;t+=2*this.radius)this.drawHorizontal(t);for(let t=0;t<=this.canvas.width;t+=2*this.radius)this.drawVertical(t)}clear(){this.context.fillStyle="#f4f8ff",this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.fill(),this.context.fillStyle="#000"}}({radius:s}),this.nodes=[],this.edges=[],this.functions=[],this.target=null,this.directed=t,this.showDistance=e,this.showGrid=i,this.init()}init(){this.board.canvas.ondblclick=t=>{this.target||this.addNode(this.nodes.length+1,this.board.clientPosition.x,this.board.clientPosition.y)},this.board.canvas.addEventListener("mousemove",(t=>{const{x:e,y:i}=this.board.clientPosition;document.body.style.cursor="unset",this.nodes.forEach((t=>{this.equalPoint(e,t.x)&&this.equalPoint(i,t.y)&&(this.target=this.target||t)})),this.target&&(this.board.buttons&&this.board.shift?document.body.style.cursor="move":document.body.style.cursor="pointer",this.board.shift||1===this.board.buttons||this.equalPoint(e,this.target.x)&&this.equalPoint(i,this.target,i)||(this.target=null))})),this.update()}update(){this.draw(),this.checkAddEdge(),this.updateNodes(),setTimeout((()=>{this.update()}),1e3/60)}addNode(t,e,i){const s={x:e||Math.floor(Math.random()*this.board.canvas.width),y:i||Math.floor(Math.random()*this.board.canvas.height),label:t,move:10};this.nodes.push(s)}addEdge(t,e){const i={from:t,to:e};this.edges.push(i),this.target=null}removeNode(t){this.nodes=this.nodes.filter((e=>e.label!==t))}removeEdge(t){const{from:e,to:i}=t;this.edges=this.edges.filter((t=>t.from!==e||t.to!==i))}draw(){this.board.clear(),this.showGrid&&this.board.drawGrid(),this.drawEdges(),this.drawLine(),this.drawNodes()}drawNodes(){this.nodes.forEach((t=>{this.board.drawNode(t.x,t.y,t.label,this.target?.label===t.label)}))}updateNodes(){this.nodes=this.nodes.map((t=>this.board.buttons&&!this.board.shift&&this.target&&this.target.label===t.label?(this.target=this.toClientPosition(t),this.toClientPosition(t)):this.exchange(t)))}exchange(t){return t.move>=0?{...t,x:t.x+.1,y:t.y+.1,move:t.move-.1}:t.move>=-10?{...t,x:t.x-.1,y:t.y-.1,move:t.move-.1}:{...t,move:10}}toClientPosition(t){return{...t,x:this.board.clientPosition.x,y:this.board.clientPosition.y}}drawEdges(){this.edges.forEach((t=>this.drawEdge(t)))}drawLine(){if(!this.board.shift||1!==this.board.buttons||!this.target)return;const{x:t,y:e}=this.board.clientPosition;this.board.drawLine(this.target.x,this.target.y,t,e)}checkAddEdge(){if(!this.target)return;if(!this.board.shift)return;const{x:t,y:e}=this.board.clientPosition;this.nodes.forEach((i=>{this.target&&i.label!==this.target.label&&this.equalPoint(t,i.x)&&this.equalPoint(e,i.y)&&(this.addEdge(this.target.label,i.label),this.target=null)}))}drawEdge(t){let e=null,i=null;if(this.nodes.forEach((s=>{s.label==t.from&&(e=s),s.label==t.to&&(i=s)})),!e||!i)return this.removeEdge(t);this.board.drawLine(e.x,e.y,i.x,i.y),this.directed&&this.board.drawDirected(e.x,e.y,i.x,i.y),this.showDistance&&this.board.drawDistance(e.x,e.y,i.x,i.y)}exportMatrix(){const t=[],e=[];for(let t=0;t<=this.nodes.length;t++)e.push(0);for(let i=0;i<=this.nodes.length;i++)t.push([...e]);return this.edges.forEach((e=>{t[e.from][e.to]++,this.directed||t[e.to][e.from]++})),t}equalPoint(t,e){return Math.abs(t-e)<=this.board.radius}neighbours(t){return this.exportMatrix()[t].map(((t,e)=>t?e:t)).filter((t=>t))}deepFirstSearch(t){const i=new(e()),s=[];i.push(t);const o=[];for(;!i.empty();){const t=i.pop();if(s[t])continue;s[t]=!0;const e=this.neighbours(t);o.push({u:t,stack:[...i.__data__],marked:[...s],neigh:e}),e.forEach((t=>i.push(t)))}return o}appendTo(t){this.board.appendTo(t)}setDirected(t){this.directed=t}setShowGrid(t){this.showGrid=t}setShowDistance(t){this.showDistance=t}setRadius(t){this.board.radius=t}}({directed:!0,showDistance:!0,showGrid:!0});s.appendTo("#canvas");const o=document.getElementById("edges"),n=document.getElementById("guide"),a=document.getElementById("optionsComponent");function h(){o.innerHTML="",s.edges.forEach((t=>{const e=document.createElement("div");e.addEventListener("click",(()=>{s.removeEdge(t),e.remove()})),e.innerHTML=`<li class="edge list-group-item">\n            <span>\n                ${t.from}\n            </span> \n            <div>\n                <i class="fas fa-long-arrow-alt-right"></i>\n            </div>\n            <span>\n                ${t.to}\n            </span>\n        </li>`,o.append(e)})),function(){const t=document.getElementById("matrix"),e=t.querySelector("thead"),i=document.createElement("tr"),o=s.exportMatrix();if(o.forEach(((t,e)=>i.innerHTML+=`<td>${e||"X"}</td>`)),e.innerHTML="",0===s.nodes.length)return;e.append(i);const n=t.querySelector("tbody");n.innerHTML="";for(let t=1;t<o.length;t++){const e=document.createElement("tr");for(let i=0;i<o.length;i++)e.innerHTML+=0===i?`<td>${t}</td>`:`<td class="${o[t][i]&&"table-primary"}">${o[t][i]}</td>`;n.append(e)}}()}h(),setInterval(h,1e3),document.getElementById("removeNodeButton").addEventListener("click",(()=>s.removeNode(s.nodes.length)));const d=document.getElementById("matrixNodeNode"),r=document.getElementById("optionTab").querySelectorAll("li");function c(t){t.preventDefault(),document.getElementById("optionsOverlay")?.remove();const e=document.createElement("div");e.id="optionsOverlay",e.className="btn-group-vertical",e.style=`width: 200px;position: fixed; left: ${t.clientX}px; top: ${t.clientY}px; background: #fff; z-index: 100;border: 1px #ddd solid;border-radius: 5px;box-shadow: 0 0 5px #00000020;`;const i=document.createElement("button");i.className="btn btn-light",i.innerHTML="Thêm đỉnh",i.onclick=t=>{const{x:e,y:i}=s.board.clientPosition;s.addNode(s.nodes.length+1,e,i)};const o=document.createElement("button");o.className="btn btn-light",o.innerHTML="Xóa đỉnh",o.onclick=t=>s.removeNode(s.nodes.length);const n=document.createElement("button");n.disabled=!0,n.className="btn btn-light",n.innerHTML="Duyệt theo chiều rộng";const a=document.createElement("button");a.disabled=!0,a.className="btn btn-light",a.innerHTML="Duyệt theo chiều sâu",e.append(i,o,n,a),document.body.append(e)}r.forEach(((t,e)=>{t.addEventListener("click",(i=>{r.forEach((t=>t.querySelector("a").classList.remove("active"))),t.querySelector("a").classList.add("active"),o.style.display="none",n.style.display="none",a.style.display="none",d.style.display="none",0===e&&(a.style.display="block"),1===e&&(o.style.display="block"),2===e&&(d.style.display="block"),3===e&&(n.style.display="block")}))})),window.addEventListener("mousedown",(t=>{const e=document.getElementById("optionsOverlay");if(!e)return;const i=t.clientX-e.offsetLeft,s=t.clientY-e.offsetTop;i<=e.offsetWidth&&i>=-e.offsetWidth&&s<=e.offsetHeight&&s>=-e.offsetHeight||(e.remove(),2===t.buttons&&c(t))})),window.addEventListener("mousemove",(t=>{if(!t.buttons)return;const e=document.getElementById("optionsOverlay");if(!e)return;const i=t.clientX-e.offsetLeft,s=t.clientY-e.offsetTop;i<=e.offsetWidth&&i>=-100&&s<=e.offsetHeight&&s>=-100&&(e.style.left=t.clientX+"px",e.style.top=t.clientY+"px")})),window.addEventListener("contextmenu",c),document.getElementById("directedToggle").addEventListener("click",(t=>{s.directed=!s.directed})),document.getElementById("showDistanceToggle").addEventListener("click",(t=>{s.showDistance=!s.showDistance})),document.getElementById("showGridToggle").addEventListener("click",(t=>{s.showGrid=!s.showGrid}))})()})();